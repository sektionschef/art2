<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="Why After finding out how much one can do with ffmpeg&amp;hellip; I thought it would be the perfect tool for creating my abstract stop-motion animation I dreamed of for years. What I wanted to realize was simple: combining scenes of a series of high resolution photographs, including images of paintings and digitally edited material with various lengths, framerates exactly timed to a soundtrack.
Ffmpeg is a powerful tool to convert audio and video files (among other things)." />
<meta name="keywords" content=", untagged" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://digitalitility.com/posts/animation_sh/" />


    <title>
        
            Animation in the command line - ./animation.sh :: Digitalitility  — Art by Stefan Schwaha
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.17863a81d979b637a02cd7632a4d86e9d80563ef460fd6af1a56962efcaa066b.css">



    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">
    <meta name="theme-color" content="">



<meta itemprop="name" content="Animation in the command line - ./animation.sh">
<meta itemprop="description" content="Why After finding out how much one can do with ffmpeg&hellip; I thought it would be the perfect tool for creating my abstract stop-motion animation I dreamed of for years. What I wanted to realize was simple: combining scenes of a series of high resolution photographs, including images of paintings and digitally edited material with various lengths, framerates exactly timed to a soundtrack.
Ffmpeg is a powerful tool to convert audio and video files (among other things)."><meta itemprop="datePublished" content="2012-01-29T12:27:30+01:00" />
<meta itemprop="dateModified" content="2012-01-29T12:27:30+01:00" />
<meta itemprop="wordCount" content="7177"><meta itemprop="image" content="https://digitalitility.com"/>
<meta itemprop="keywords" content="untagged," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://digitalitility.com"/>

<meta name="twitter:title" content="Animation in the command line - ./animation.sh"/>
<meta name="twitter:description" content="Why After finding out how much one can do with ffmpeg&hellip; I thought it would be the perfect tool for creating my abstract stop-motion animation I dreamed of for years. What I wanted to realize was simple: combining scenes of a series of high resolution photographs, including images of paintings and digitally edited material with various lengths, framerates exactly timed to a soundtrack.
Ffmpeg is a powerful tool to convert audio and video files (among other things)."/>




    <meta property="og:title" content="Animation in the command line - ./animation.sh" />
<meta property="og:description" content="Why After finding out how much one can do with ffmpeg&hellip; I thought it would be the perfect tool for creating my abstract stop-motion animation I dreamed of for years. What I wanted to realize was simple: combining scenes of a series of high resolution photographs, including images of paintings and digitally edited material with various lengths, framerates exactly timed to a soundtrack.
Ffmpeg is a powerful tool to convert audio and video files (among other things)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://digitalitility.com/posts/animation_sh/" /><meta property="og:image" content="https://digitalitility.com"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-01-29T12:27:30+01:00" />
<meta property="article:modified_time" content="2012-01-29T12:27:30+01:00" /><meta property="og:site_name" content="Digitalitility" />







    <meta property="article:published_time" content="2012-01-29 12:27:30 &#43;0100 CET" />










    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">Digitalitility</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/posts">Portfolio</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        34 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="https://digitalitility.com/posts/animation_sh/">Animation in the command line - ./animation.sh</a>
      </h1>

      

      

      

      <div class="post-content">
        
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://player.vimeo.com/video/18348528" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="vimeo video" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
</div>

<h1 id="why">Why</h1>
<p>After finding out how much one can do with <a href="http://www.ffmpeg.org/" title="http://www.ffmpeg.org/">ffmpeg</a>&hellip; I thought it would be the perfect tool for creating my abstract stop-motion animation I dreamed of for years. What I wanted to realize was simple: combining scenes of a series of high resolution photographs, including images of paintings and digitally edited material with various lengths, framerates exactly timed to a soundtrack.</p>
<p>Ffmpeg is a powerful tool to convert audio and video files (among other things). It allows to define many parameter and enables batch processing videos. What it does not provide is a graphical interface for cutting and editing the files. So I learned some BASH and wrote a script to achieve my goals. All I am working with is a directory where the scenes are stored, a text file which defines the time, the framerate and the position of the individual scenes and the final output video.</p>
<p>The advantages are that I exactly get what I want and that I learned a lot. It&rsquo;s the simple, clear way of editing the project as well as the separation of media and the concept that I really like about this method. The disadvantages are the time until the whole video is rendered - it takes approximately an hour until the HD version of the video is rendered. For this project, I still think that this approach is in fact easier than working with a large-scale video editing software.</p>
<p>The video itself is my personal art project. It features some visual, experimental ideas. It was done on the basis of my own photos and paintings/drawings and simply deals with &ldquo;seeing things&rdquo; as well as how to achieve a flat picture from a real world 3d image. I am messing with colours, perspective, light and movement. In the beginning everything is about an impression of movement using still images. Additionally, the animations of signs and graffiti support the topic of movement and are used to separate certain blocks of scenes. Then, similar geometric forms found on the streets are shown. The exact alignment of the photos emphasizes the similarities of the objects. The next scenes of the animation deal with colours and colour differences that were generated by manipulating the contrast.</p>
<p>The following animations should show a certain difficulty of perceiving depth in the images. The next images continue this idea and visualize the transformation from the three dimensional reality to the flat, two dimensional image of that reality. The animations featuring the rectangles of black tape invert this process by actually projecting a flat rectangle back in the real space. The rectangle is solely visible from the perspective of the camera.</p>
<p><figure><img src="equip.jpg"
         alt="taped rectangle"/>
</figure>

<figure><img src="equip02.jpg"
         alt="taped rectangle"/>
</figure>

<figure><img src="equip03.jpg"
         alt="taped rectangle"/>
</figure>
</p>
<p>Similarly, the images feature how space, a white wall with corners, are reduced to different shades of white. The change of perspective creates different minimalist images. In the paintings the topics are applied practically. It is moreover interesting to see, how these evolve. The wood frame in the end acts as a summary by showing the same object in different states: during the different colours of daylight, with a moving light source and the wood frame moving itself.</p>
<p>I chose the song <em>Mouthpiece</em> by the band <a href="http://www.touchandgorecords.com/bands/band.php?id=22" title="http://www.touchandgorecords.com/bands/band.php?id=22">Shellac</a> as a soundtrack. The song is vital to the film providing the rhythm of the transitions and it is a brilliant song.</p>
<h2 id="manipulating-images">Manipulating Images</h2>
<p>Most of the images need some form of editing or need to be arranged to achieve a proper overlay in order to focus on specific differences in the images and erase the unwanted differences. Some changes are created just by manipulating pictures.</p>
<p>For image manipulation I use the <a href="http://www.gimp.org/" title="http://www.gimp.org/">Gimp</a>. Each scene&rsquo;s frame is one layer and the whole scene can be saved with all layers in the .xcf format. The task of aligning the layers is easy with the right script, <a href="http://registry.gimp.org/node/18961" title="http://registry.gimp.org/node/18961">exact aligner</a>. Just draw a line on two layers to define two identical parts in both images. After running the script from the menu the second line is fitted to the first line - hard to explain, easy to grasp. Usually I crop the canvas a little (in the aspect ratio of 4:3).</p>
<p>Then another wonderful <a href="http://registry.gimp.org/node/15617" title="http://registry.gimp.org/node/15617">script</a> enables me to export all layers as separate .jpg files (I only needed to edit the default filename in the script itself from .png to .jpg). I also changed the Gimp&rsquo;s default .jpg quality settings. The result is a couple of .jpgs in your home folder with the scene&rsquo;s filename and a continuous frame number. The scripts take care of the rest.</p>
<h2 id="first-attempt">First Attempt</h2>
<p>The first task for me was to define a workflow what tasks need to be done, in what sequence, how to organize the files and how to change the parameters in a convenient way. The 3 basic operations I wanted are:</p>
<ul>
<li>Create a new scene with a set of images</li>
<li>Edit parameters of existing scenes</li>
<li>Edit parameters of all scenes at once</li>
</ul>
<p>The basic command for ffmpeg to render a video based on images is something like:</p>
<p><code>ffmpeg -loop_input -f image2 -r &lt;FRAMERATE_SCENE&gt; -i &quot;input_frame_%04d.jpg&quot; -vframes &lt;LENGTH&gt; &quot;output.avi&quot;</code></p>
<p>As a result, the basic parameters are the <strong>framerate</strong> of the scene, its <strong>length</strong> and the <strong>input filename</strong>, which is given as <em>%04d</em>. This means that the format of the number is 4 digits, 0001-9999 (<a href="http://spielwiese.la-evento.com/hokuspokus/" title="http://spielwiese.la-evento.com/hokuspokus/">helpful link</a>). Furthermore, the <a href="http://www.ffmpeg.org/faq.html" title="http://www.ffmpeg.org/faq.html">ffmpeg faq</a> points out that .avi files can be concatenated using the <em>cat</em> command - merging the files with the result of one single video. However, the cat command does not know in which sequence to merge the files. For the correct order of all scenes a <strong>numbering</strong> is needed, which I called „rank&quot;, and this should become part of the filename. The <em>cat</em> command starts with the first number and continues until the last frame. In sum, the framerate, the length and the rank are the parameters which determine the editing of the video file. These parameters should be easily changeable. The only thing which should be invariable is the scene&rsquo;s name.</p>
<p>For easing my task and keeping an overview I wrote these parameters in a separate .csv file (comma separated file). There I can reschedule the scenes, the framerates and the length at once. For rescheduling, sorting, calculating and changing the scenes the .csv file can be imported in open office spreadsheet. The cutlist is in the form of:</p>
<pre tabindex="0"><code>RANK;SCENE;FRAMERATE;LENGTH
0001;abdeckungen;4;30;
0002;radl;4;50;
</code></pre><p>My first version script (you can find in the <a href="http://tutori.alitility.com/doku.php?id=ubuntu:animation_in_the_command_line#one_after_the_other_script" title="ubuntu:animation_in_the_command_line">appendix</a>) begins by asking the only parameter a scene name from the user. The input is then checked if it already exists or not, which determines the subsequent operations. If the input is <em>all</em> all scenes are rendered according to the parameters of the cutlist.</p>
<p>The cutlist file is read for the needed parameters or if the scene is not yet existing these are entered directly to the terminal and written to the cutlist. For new scenes a directory is made, the frames transferred to this directory, resized to the wished size using imagemagick, renamed to include the scenes' rank and rendered. If the rank has changed the filename of all videos is renamed and the scene is rendered according to the new parameters.</p>
<p>In the final block which is run in any case the filenames of all video outputs is checked against the cutlist.csv in order to remove obsolete files, which would mess up the <em>cat</em> command. Then all videos are merged by <em>cat</em> in the sequence of the rank and the soundtrack is added by ffmpeg. Que bello!</p>
<h2 id="picture-in-picture-animation">Picture in Picture Animation</h2>
<p>Soon after finishing my first script and celebrating my success I realized that the end result became a victim of the worst enemy art films have to face - boredom. The scenes were cut one after the other and the proper mojo was missing. What I actually wanted was displaying several scenes at once (picture in picture) in order to emphasize a relationship among them. In <a href="http://www.imagemagick.org/script/index.php" title="http://www.imagemagick.org/script/index.php">imagemagick</a> I found a way of realizing what I wanted using layers. The basic command for this is:</p>
<pre tabindex="0"><code>for i in {1..5}
do
convert -size 1440x1080 xc:black &quot;a_*$i.jpg&quot; -geometry 700x525+383+6 -composite &quot;b_*$i.jpg&quot; -geometry 700x525+13+546 -composite &quot;c_*$i.jpg&quot; -geometry 700x525+728+546 -composite &quot;output_`printf &quot;%04d&quot; $i`.jpg&quot;
done
</code></pre><p>I started all over again, this time letting imagemagick render the frames by arranging several pictures into one. The frames need to be processed individually before I can render a scene. As a consequence every single frame of the final video is rendered in imagemagick and then processed by ffmpeg. The scenes are layers on a 1440×1080 canvas in black color. The output is a frame in the format ffmpeg is able to use. Having each frame rendered takes quite some time! Still, the quality is amazing.</p>
<p>On the basis of this command I came up with a new workflow consisting of 3 separate scripts:</p>
<ul>
<li>rendering the whole video or just parts of it (by defining a frame range in the terminal)</li>
<li>a preview script, for monitoring single scenes (use export of gimp; defining the framerate in the terminal)</li>
<li>importing a scene in my cutlist</li>
</ul>
<p>Like in the first script I use a .csv file for the parameters, which is a little bit expanded now. The difference compared to the cutlist of my first script is a column for the PIP parameter, a category column and frank instead of rank and the endfrank instead of length. The PIP parameter defines where the scene is placed on the canvas. The category just helps me to organize and filter the scenes while editing the .csv file directly but has no impact on the process itself. The biggest difference is frank, the frame the scene appears for the first time in the final video. On the contrast, the rank of the first script was just ordinal. The endfrank is the last frame in the video the scene is shown - this quite helps with the timing when cutting the scenes. The cutlist looks like this:</p>
<pre tabindex="0"><code class="language-csv" data-lang="csv">FRANK;SCENE;FRAMERATE;ENDFRANK;PIP(wxh+w_o+h_o);CATEGORY 50;emergencydahoam;7;600;900x675+980+365;animation_bewegung 275;stiegeberlin;5;650;900x675+40+40;animation_bewegung 700;ubahnstill;8;786;1440x1080+240+0;animation 787;ubahn;8;990;1440x1080+240+0;animation 1000;benettonromdoppelt;5;1195;900x675+980+202;bewegung 1005;benettonrom;5;1200;900x675+40+202;bewegung 1211;kabelsalatrom;5;1471;640x480+1120+560;bewegung 1226;gradeskabelrom;5;1486;640x480+1120+40;bewegung 1253;kabelangelbrom;5;1501;640x480+160+560;bewegung 1268;hinundherrom;5;1522;640x480+160+40;bewegung 1542;abdeckungen;4;1738;900x675+980+365;gleicheformen 1644;gitterfenster;4;1859;900x675+40+40;gleicheformen 1738;malewitschrom;4;1968;900x675+980+40;gleicheformen 1860;fensterneubaugasse;4;2068;900x675+40+365;gleicheformen 2088;dreckradrom;8;2281;900x675+980+202;animation 2088;dreckbamrom;8;2281;900x675+40+202;animation 2302;farbengelbblinkybill;4;2550;900x675+980+202;farbe_gelb 2312;farbengelbvierkant;4;2595;900x675+40+202;farbe_gelb 2550;farbengraumauer;3;2833;900x675+980+202;farbe_grau 2595;farbengraucanvas;4;2880;900x675+40+202;farbe_grau 2833;farbenalles;5;3040;900x675+980+202;farbe 2880;gumpsn;2;3069;900x675+40+202;farbe 3093;radl;8;3274;1440x1080+240+0;animation_bewegung 3290;wienfluss;10;3506;900x675+1200+202;tiefe 3300;meyerrom;10;3536;900x675+240+202;tiefe 3521;andreahandrom;10;3780;900x675+980+202;tiefe 3550;leibalberlin;5;3780;900x675+40+202;animation_tiefe 3794;leopolda;5;4003;640x480+640+40;3d 3824;leopoldb;5;4003;640x480+160+560;3d 3854;leopoldc;5;4003;640x480+1120+560;3d 4014;dreieckroma;5;4223;640x480+640+40;3d 4044;dreieckromb;5;4223;640x480+160+560;3d 4074;dreieckromc;5;4223;640x480+1120+560;3d 4234;balkenbaerberlina;5;4453;640x480+640+40;3d 4264;balkenbaerberlinb;5;4453;640x480+160+560;3d 4294;balkenbaerberlinc;5;4453;640x480+1120+560;3d 4474;oelschranka;2;4570;1440x1080+240+0;perspektive 4570;oelschrankb;5;4860;1440x1080+240+0;perspektive 4884;rechteckb;2;5028;640x480+1120+40;perspektive 4884;rechteckd;2;5028;640x480+1120+560;perspektive 4884;rechtecka;2;5028;640x480+160+40;perspektive 4884;rechteckc;2;5028;640x480+160+560;perspektive 5028;rechteckabcddoppelt;5;5293;640x480+1120+40;perspektive 5028;rechteckabcdvierfach;5;5293;640x480+1120+560;perspektive 5028;rechteckabcd;5;5293;640x480+160+40;perspektive 5028;rechteckabcddreifach;5;5293;640x480+160+560;perspektive 5320;powerhouseberlin;6;5590;900x675+40+40;2d 5320;vogelberlin;6;5590;900x675+980+365;2d 5590;jedermannberlin;4;5840;900x675+40+365;2d 5590;tucholsky;5;5840;900x675+980+40;2d 5886;malereiberlina;2;6376;640x480+640+40;malerei 5966;malereiberlinc;2;6376;640x480+1120+560;malerei 6046;malereiberlinb;2;6376;640x480+160+560;malerei 6376;malereiberlinbstill;5;6511;640x480+160+560;malerei 6376;malereiberlincstill;5;6554;640x480+1120+560;malerei 6376;malereiberlinastill;5;6602;640x480+640+40;malerei 6659;blumenkastldrehenstill;5;6788;640x480+160+560;alles 6716;blumenkastllichtstill;5;6788;640x480+640+40;alles 6770;blumenkastllichtdrehenstill;5;6788;640x480+1120+560;alles 6788;blumenkastldrehenpreludium;7;6806;640x480+160+560;alles 6788;blumenkastllicht;10;7023;640x480+640+40;alles 6788;blumenkastllichtdrehen;7;7023;640x480+1120+560;alles 6806;blumenkastldrehen;7;7023;640x480+160+560;alles
</code></pre><p>I calculated some standard picture in picture positions for arranging the scenes:</p>
<p><figure><img src="animation_04b.png"
         alt="animation_04b" width="100%"/>
</figure>

<figure><img src="animation_03b.png"
         alt="animation_03b" width="100%"/>
</figure>

<figure><img src="animation_04.png"
         alt="animation_04" width="100%"/>
</figure>

<figure><img src="animation_03.png"
         alt="animation_03" width="100%"/>
</figure>

<figure><img src="animation_02b.png"
         alt="animation_02b" width="100%"/>
</figure>

<figure><img src="animation_02.png"
         alt="animation_02" width="100%"/>
</figure>
</p>
<p>here is a flowchart: <figure><img src="flowchart_animation.png"
         alt="Flowchart of animation" width="100%"/>
</figure>
</p>
<h3 id="preview">Preview</h3>
<p>Gimp owns an animation preview function (filters &gt; animation &gt; playback) but I don&rsquo;t really like it. My images have a higher resolution and must be rescaled before viewing the animation and changing the framerate is a pain in the ass. I wrote a script which does the same thing only a bit more convenient. At the same time, it is the first step before importing a scene in my project.</p>
<p>The framerate is set in the terminal as $1 otherwise a default value of 5 is used. The other variables for this little script is the image size and the bitrate of the preview video. After the images have been exported from gimp they are moved from the home directory to the preview directory, resized and renamed. If no images are in the home directory the script processes those of the preview directory so I can experiment with different framerates quickly. The preview directory is emptied if new images have been exported to the home directory. The video itself is created by the basic ffmpeg command for these situations. That&rsquo;s it basically!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#! /bin/bash
</span><span style="color:#75715e"></span>
FRAMERATE<span style="color:#f92672">=</span>$1
<span style="color:#75715e"># can be set as part of the command</span>

BITRATE<span style="color:#f92672">=</span>10000k
LENGTH<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>

PREVIEW_DIRECTORY<span style="color:#f92672">=</span>06_preview
SIZE<span style="color:#f92672">=</span>x1080

<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;</span>$FRAMERATE<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
   FRAMERATE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;5&#34;</span>
<span style="color:#66d9ef">fi</span>
<span style="color:#75715e"># sets a default value for framerate</span>

<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;`ls ~ | grep &#34;</span>_*.jpg<span style="color:#e6db74">&#34;`&#34;</span> <span style="color:#f92672">]</span>

<span style="color:#66d9ef">then</span>
echo <span style="color:#e6db74">&#34;+++++++++ already exists ++++++&#34;</span>

<span style="color:#66d9ef">else</span>
<span style="color:#75715e">#clean house</span>
rm -f $PREVIEW_DIRECTORY/*.jpg

echo <span style="color:#e6db74">&#34;+++++++++ Copy frames to preview directory ++++++++++&#34;</span>
mv ~/*.jpg $PREVIEW_DIRECTORY

echo <span style="color:#e6db74">&#34;+++++++++ Resize frames ++++++++++&#34;</span>
mogrify -resize $SIZE $PREVIEW_DIRECTORY/frame_*.jpg

<span style="color:#66d9ef">fi</span>

echo <span style="color:#e6db74">&#34;+++++++++++++ Render </span>$SCENE<span style="color:#e6db74"> ++++++++++++&#34;</span>
ffmpeg -y -loop_input -r $FRAMERATE -f image2 -i <span style="color:#e6db74">&#34;</span>$PREVIEW_DIRECTORY<span style="color:#e6db74">/frame_%04d.jpg&#34;</span> -vframes $LENGTH -b $BITRATE -r <span style="color:#ae81ff">25</span> preview.avi

exit
</code></pre></div><h2 id="importing-new-scene-in-project">Importing new scene in project</h2>
<p>In case I liked the preview, it is included in the cutlist and therefore part of the project. The following script accomplishes this task without any woes. It asks for the details and parameters in the terminal and writes them into a new line of the cutlist. Before that the contents of the cutlist are shown in order to have some sort of orientation where to put it. For security reasons, the script also checks if the scene&rsquo;s name is already existing. Additionally, a new directory (named after the scene name) is created, the images are moved there and are also renamed properly by including the scene name.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#! /bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e">###########################################################</span>
CUTLIST<span style="color:#f92672">=</span>cutlist_hobo.csv
PREVIEW_DIRECTORY<span style="color:#f92672">=</span>06_preview

<span style="color:#75715e">###########################################################</span>

echo ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
echo <span style="color:#e6db74">&#34;Please enter the SCENE&#39;s name:&#34;</span>
echo ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
read INPUT_SCENE

<span style="color:#75715e"># check if input scene is unique</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;`grep &#34;</span>;<span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span>;<span style="color:#e6db74">&#34; </span>$CUTLIST<span style="color:#e6db74">`&#34;</span> <span style="color:#f92672">]</span>

<span style="color:#66d9ef">then</span>

cat $CUTLIST

echo +++++++++ <span style="color:#e6db74">&#34;Define parameters&#34;</span> ++++++++++
echo <span style="color:#e6db74">&#34;Please enter its FRANK:&#34;</span>
read INPUT_FRANK
echo <span style="color:#e6db74">&#34;Please enter the framerate:&#34;</span>
read INPUT_FRAMERATE
echo <span style="color:#e6db74">&#34;Please enter the last frame&#39;s number:&#34;</span>
read INPUT_LENGTH
echo <span style="color:#e6db74">&#34;Please enter the PIP parameters (wxh+w_o+h_o):&#34;</span>
read INPUT_PIP

echo +++++++++ <span style="color:#e6db74">&#34;Create directory </span>$INPUT_SCENE<span style="color:#e6db74">&#34;</span> ++++++++++
mkdir -p 02_scenes/$INPUT_SCENE

echo +++++++++ <span style="color:#e6db74">&#34;Copy frames to newly created directory&#34;</span> ++++++++++
mv $PREVIEW_DIRECTORY/*.jpg 02_scenes/$INPUT_SCENE

echo +++++++++++++ <span style="color:#e6db74">&#34;Rename by adding the scene&#39;s name&#34;</span> ++++++++++++
<span style="color:#66d9ef">for</span> FILE in 02_scenes/$INPUT_SCENE/frame_*.jpg ;
<span style="color:#66d9ef">do</span>
NEWFILE<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>echo $FILE | sed <span style="color:#e6db74">&#34;s/frame/</span>$INPUT_SCENE<span style="color:#e6db74">\_frame/g&#34;</span><span style="color:#e6db74">`</span> ;
mv <span style="color:#e6db74">&#34;</span>$FILE<span style="color:#e6db74">&#34;</span> $NEWFILE ;
<span style="color:#66d9ef">done</span>

echo +++++++++++++ <span style="color:#e6db74">&#34;Write variables to cutlist&#34;</span> ++++++++++++
echo <span style="color:#e6db74">&#34;</span>$INPUT_FRANK<span style="color:#e6db74">;</span>$INPUT_SCENE<span style="color:#e6db74">;</span>$INPUT_FRAMERATE<span style="color:#e6db74">;</span>$INPUT_LENGTH<span style="color:#e6db74">;</span>$INPUT_PIP<span style="color:#e6db74">;&#34;</span> &gt;&gt; $CUTLIST

<span style="color:#66d9ef">else</span>
read -p <span style="color:#e6db74">&#34;+++++++++++++ Name of scene is already existing ++++++++++++&#34;</span>

<span style="color:#66d9ef">fi</span>

exit
</code></pre></div><h2 id="script-for-rendering-the-pip-video">Script for rendering the PIP video</h2>
<h3 id="render-framerate-and-length">Render framerate and length</h3>
<p>The first part covers the conversion of my images in frames for the video, i.e. the images are brought to the correct framerate and length. Because of arranging the scenes frame-by-frame, I have to do this by myself and cannot simply tell ffmpeg to deal with it like in the first script. But let&rsquo;s start with one thing after the other.</p>
<p>First, the variables are defined. It is possible to define a frame range when running the script in the terminal, in which the script is processed. For instance, frame 500 to 1000. The default value is frame 1 to frame 7270 which is approximately the end of the soundtrack. The overall framerate I chose is 25 seconds per frame following the PAL standard. The canvas size is 1920×1080 and the bitrate for the final movie is also defined by a variable. Once the video is finished I might render it with a higher bitrate.</p>
<p>Next, each scene&rsquo;s parameters are read from the cutlist: the frank, the length, the framerate and the scene per PIP frame. Additionally, the number of the original frames in the directory is counted. The length is derived by the difference between frank and the end frame of the scene. For matching the strings of scene names, I use the delimiter &ldquo;;&rdquo;, otherwise equal parts of names would be found as well (looking for &ldquo;deck&rdquo; finds scene name &ldquo;deck&rdquo; but also &ldquo;abdeckungen&rdquo;). For debugging, the scripts prints the parameters it finds for each scene.</p>
<p>Now, the mess begins. For clarification, I&rsquo;ll use an example. The basic parameters we need is the length <em>l</em>, how long the scene is displayed i.e. how many frames, and the framerate <em>r</em>, how fast the images change. Furthermore, we also need to know how many images the original animation consists of <em>o</em>.</p>
<pre tabindex="0"><code>r... 10
l... 600
o... 4 (A,B,C,D)
</code></pre><p>Mind the difference between frame and image. Image for me is one of the pictures made for the scene, in the example A-D. Frame for me is one of the pictures the final video consists of, 25 frames per second in my case.</p>
<p>The image has to be copied to a certain amount in order to reach the framerate defined in the cutlist. This amount is calculated by the overall framerate divided by the desired framerate, 25/10 = 2.5. Mind that Bash gives only the integer output of 2. Neglecting the 0.5 (dealing with this later), the image has to be copied once. Afterwards, the second image B has to be copied as well as the remaining images of the animation (C,D). This procedure has to be done until the end frame of 600 is reached. I think this is what my math teacher used to call series and rows.</p>
<p>I realized this function by implementing two loops, the outer loop covering the length count and the inner loop carrying out the framerate copy. The inner loop, called framerate_boost, is starting at 1 and ends at the 25/2 increasing by 1. Once this loop is done for an image it falls back to the outer loop, the length_boost, starting at 0 ending at 600 - 1. The increment of the length_boost must be also 25/2. In the examples the length_boost has the following values: 0,2,4,6&hellip; and 0,5,10,15&hellip; respectively. The loop itself has no function but enables to copy the different images one after the other until the last frame of the scene.</p>
<p>The animation would look like this:</p>
<div>
  <table>
  <tbody><tr><th>Frame</th><th>Image</th><th>Framerate Loop</th><th>Length Loop</th></tr><tr><td>1</td><td>A</td><td>1st frame_boost</td><td rowspan="2">1st length_boost</td></tr><tr><td>2</td><td>A</td><td>2nd frame_boost</td></tr><tr><td>3</td><td>B</td><td>1st frame_boost</td><td rowspan="2">2nd length_boost</td></tr><tr><td>4</td><td>B</td><td>2nd frame_boost</td></tr><tr><td>5</td><td>C</td><td>1st frame_boost</td><td rowspan="2">3rd length_boost</td></tr><tr><td>6</td><td>C</td><td>2nd frame_boost</td></tr><tr><td>7</td><td>D</td><td>1st frame_boost</td><td rowspan="2">4th length_boost</td></tr><tr><td>8</td><td>D</td><td>2nd frame_boost</td></tr><tr><td>9</td><td>A</td><td>1st frame_boost</td><td rowspan="2">5th length_boost</td></tr><tr><td>10</td><td>A</td><td>2nd frame_boost</td></tr><tr><td>11</td><td>B</td><td>1st frame_boost</td><td rowspan="2">6th length_boost</td></tr><tr><td>..</td><td>..</td><td>..</td></tr><tr><td>600</td><td>D</td><td>2nd frame_boost</td><td>300th length_boost</td></tr></tbody>
</table>
</div>
<p>for r&hellip; 5</p>
<div>
  <table>
  <tbody><tr><th>Frame</th><th>Image</th><th>Framerate Loop</th><th>Length Loop</th></tr><tr><td>1</td><td>A</td><td>1st frame_boost</td><td rowspan="5">1st length_boost</td></tr><tr><td>2</td><td>A</td><td>2nd frame_boost</td></tr><tr><td>3</td><td>A</td><td>3rd frame_boost</td></tr><tr><td>4</td><td>A</td><td>4th frame_boost</td></tr><tr><td>5</td><td>A</td><td>5th frame_boost</td></tr><tr><td>6</td><td>B</td><td>1st frame_boost</td><td rowspan="5">2nd length_boost</td></tr><tr><td>7</td><td>B</td><td>2nd frame_boost</td></tr><tr><td>8</td><td>B</td><td>3rd frame_boost</td></tr><tr><td>9</td><td>B</td><td>4th frame_boost</td></tr><tr><td>10</td><td>B</td><td>5th frame_boost</td></tr><tr><td>11</td><td>C</td><td>1st frame_boost</td><td rowspan="2">3rd length_boost</td></tr><tr><td>..</td><td>..</td><td>..</td></tr><tr><td>600</td><td>D</td><td>5th frame_boost</td><td>12th length_boost</td></tr></tbody>
</table>
</div>
<p>the end result could look like this (although it has an infinite loop):</p>
<p>with r = 10
<figure><img src="animation_ball.gif"
         alt="animation_ball" width="100%"/>
</figure>

with r = 5
<figure><img src="animation_ball_slow.gif"
         alt="animation_ball_slow" width="100%"/>
</figure>
</p>
<p>Now, the problem arises that the copy command of the inner loop has to address the correct filenames of the images A-D. For the first frames A, for the next couple of frames B and so on. No wildcards can be used. (otherwise the error notification of <em>directory file not existing</em> shows up). The filenames of the images are in the form of 0001,0002&hellip; Therefore, a frame counter is needed which provides the correct number in the images' filenames. This counter has to be defined in the outer loop, because here the image is selected. I&rsquo;ll use the example from before with r = 10 frames per second.</p>
<p>The length_boost counter, with the increment of 25/10, overall framerate divided by desired framerate, can to rearranged by 0_25/10, 1_25/10, 2_25/10,&hellip; n_25/10. My solution was then to divide the actual length_boost by (25/r + 1), which provides a series of consecutive numbers 1,2,3,..n. This variable can be used to address the images by their filename. Unfortunately, this is not the end of the story. There is the problem that those frame numbers exceeding the number of images (A,B,C,D) are not existing, the numbers &gt;4. When the last image D or 0004 was used the process should start from the beginning, image A or 0001. The 9th frame should be sourced from picture A.</p>
<div>
  <table>
  <tbody><tr><th>Length_boost counter</th><th>Image Number</th><th>Increment</th><th>Rearranging</th><th>$COUNTER</th></tr><tr><td>0</td><td>0001</td><td>+2</td><td>0<em>2</em></td><td>0/2+1=1</td></tr><tr><td>2</td><td>0002</td><td>+2</td><td>12</td><td>2/2+1=2</td></tr><tr><td>4</td><td>0003</td><td>+2</td><td>2<em>2</em></td><td>4/2+1=3</td></tr><tr><td>6</td><td>0004</td><td>+2</td><td>32</td><td>6/2+1=4</td></tr></tbody>
</table>
</div>
<p>I used to overcome this problem with the formula: <em>$counter-o</em>$counter/o_. This formula checks how often the original_frame number is present in the counter. Later (when converting time into numbers of frames), I discovered that there is a built in function, called <a href="http://www.computing.net/answers/unix/remainder-operator/6820.html" title="http://www.computing.net/answers/unix/remainder-operator/6820.html">remainder</a> or modulo_% for bash. Took me a while to fully understand it: 5/2=2 and 5%2=1. The remainder is the left over after a division of two integers (<a href="http://en.wikipedia.org/wiki/Remainder" title="http://en.wikipedia.org/wiki/Remainder">wikipedia</a>). By using the remainder like this <em>$counter%o</em> the resulting series stays inside the limit of the number of images. Basically, this is the same thing as using as the formular above. One problem still remains! For making things even more complicated this does not work for multiples of the number of animation images <em>o</em>, as <em>4%4</em> equals <em>0</em>. A single if condition is able to correct this issue. puh!</p>
<div>
  <table>
  <tbody><tr><th>Length_boost counter</th><th>$COUNTER</th><th>$COUNTER_RESTART</th></tr><tr><td>0</td><td>0/2+1=1</td><td>1%4=1</td></tr><tr><td>2</td><td>2/2+1=2</td><td>2%4=2</td></tr><tr><td>4</td><td>4/2+1=3</td><td>3%4=3</td></tr><tr><td>6</td><td>6/2+1=4</td><td>4%4=0, if condition =4</td></tr><tr><td>8</td><td>8/2+1=5</td><td>5%4=1</td></tr><tr><td>10</td><td>10/2+1=6</td><td>6%4=2</td></tr><tr><td>12</td><td>12/2+1=7</td><td>7%4=3</td></tr><tr><td>14</td><td>14/2+1=8</td><td>8%4=0, if condition =4</td></tr></tbody>
</table>
</div>
<p>Additionally, the copy command must include the scenename and the frame count (the number of the frame it appears in the final video) in the filenames of the frames. The frame count is realized by summing up the loop counters length_boost, framerate_boost. This is the reason why the length_boost starts at zero and not at 1. In order to additionally have the actual frame of the final video the frank -1 is also included. The final result is that each scene is properly positioned due to the frame number in the filename and each scene has the correct value of iteration. In the next step this material will be put together in the correct way, frame by frame.</p>
<h3 id="render-pip-frames">Render pip frames</h3>
<p>The next step is to read out the PIP positions from the cutlist for every scene. On the basis of this information the single frames are created. A temporary directory saves the PIP informations and frames before they are rendered in the next section of the script. This temp file is emptied every run and the frames are newly created.</p>
<p>For every frame a text file is created in which the scene&rsquo;s PIP position is written. The PIP position is in the form of expanding the imagemagick command to process several layers. This means the txt file consists of the parameters which are to be included in the imagemagick command to create the layer for each frame. If the frame does not feature any scenes the text file is empty. An example for a scene&rsquo;s command in a .txt file would be:</p>
<p><code>&lt;filename&gt; -geometry &lt;PIP position&gt; -composite</code></p>
<p>Echo adds these command parts for every scene without using a new line. This is important for including the .txt file into the imagemagick command.</p>
<p>I added the printf command for the creation of the filenames of the final frames because ffmpeg needs them in the form of 0001. I also added the type True Color because otherwise ffmpeg would return the video in grayscale if the first frames were just black screen. Additionally, ffmpeg is processing the images if the file starts from frame 0001 and not 0520.</p>
<h3 id="render-video">Render Video</h3>
<p>The last step is the ffmpeg command for converting images into video. Before we can do that we have to take care of the starting points. Since the rendering takes a lot of time, the script should enable me to see the changes of parameters and timings right away by just presenting a short range of frames, for instance from frame 2000 until frame 2180. In this regard, the soundtrack is especially important, so we need to convert the starting frame into the song&rsquo;s position or to be more precisely time in the form of hh:mm:ss.xxx (hours:minutes:seconds.milliseconds). This task can be done using the remainder we already learned (well, I learned about it here and it took quite some time). Anyway, we can skip the hours because we won&rsquo;t reach these dimensions, the length of my video is about 4 minutes. For the rest one has to know that one second features 25 frames (of course only if the framerate of the final video is 25!). A minute, therefore, features 25_60 frames and one millisecond features 1/40 frames (1000ms=1s=25frames). The starting frame is first checked against the minutes (start_frame/(25_60)). The rest, the remainder %(25_60), is used to derive the seconds /25 and finally the remaining frames are formatted to milliseconds by %(25_60)%25*40. This ensures that the timing of the selection (starting at a certain frame and ending at a certain frame) corresponds exactly to timing of the sound at this position.</p>
<p>The ffmpeg command is then only the simple conversion of my rendered PIP frames to a video file. No special parameters are relevant here. The start and end frame determine the length of the video and the calculated delay of the soundtrack is included.</p>
<h3 id="important-notes">Important notes</h3>
<p>The script&rsquo;s concept is based on the rule that a scene name is only given once&hellip; repeating a scene must result in a new scene name. The names of the scenes should have no underscores either as it is used as a delimiter in the filenames. Total confusion or apocalypse would be the logical consequence.</p>
<p>The <em>0</em> after the wildcard <em>*</em> in the cp command is necessary because otherwise a 0011 and 0001 cannot be distinguished. It is however necessary as the script I use to export gimp&rsquo;s layers as .jpg files uses leading zeros (e.g. 00123). This approach might be a little bit risky as one digit is missing (0150 is found; 1150 is not found). my frame numbers are not that high so I do not run into problems with this solution&hellip; at least not yet.</p>
<p>The framerate and the actual the framerate of the script are different due to the fact that the calculation <em>overall_framerate/desired_framerate</em>(25/10) does not necessarily lead to integer numbers. Bash, luckily, gives only the integer numbers, in our example 2. This is not necessarily a bad thing, because the correct framerate would extend the length of the scene. Having a fixed length of a scene is, however, really important. Furthermore, the final video should have 25 frames per second and therefore the framerate should be a multiple of 25.</p>
<p>Ffmpeg again needs leading zeros for its frame numbers, so conversion from normal numbers (e.g. 123). the printf command is the right tool for this, in the other direction a 0* does the trick, outlined above.</p>
<p>The PIP script is using cut (combined with <em>sed &lsquo;1d&rsquo;</em> for dropping first row) instead of csvtool which I used in my first script. Basically, it provides the same task for me without installing an additional package.</p>
<p>Some of the names I use in my script sound stupid&hellip; I just named it to something that came to my mind ( the name westling for instance originates from the Swedish royals, who married when I was writing this script). But there are many comments for clarifying everything.</p>
<h3 id="the-script">The script</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#! /bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e">##################### Variables ###########################</span>
START_FRAME<span style="color:#f92672">=</span>$1
END_FRAME<span style="color:#f92672">=</span>$2
OVERALL_ASPECT_RATIO<span style="color:#f92672">=</span>1920x1080
OVERALL_FRAMERATE<span style="color:#f92672">=</span><span style="color:#ae81ff">25</span>
<span style="color:#75715e"># important for calculating the number of needed frames of the individual framerate</span>

<span style="color:#75715e"># default values for length</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;</span>$START_FRAME<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
   START_FRAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1&#34;</span>
<span style="color:#66d9ef">fi</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;</span>$END_FRAME<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>
<span style="color:#66d9ef">then</span>
   END_FRAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;7150&#34;</span>
<span style="color:#66d9ef">fi</span>

<span style="color:#75715e">#directories and files</span>
CUTLIST<span style="color:#f92672">=</span>cutlist_hobo.csv
WESTLING<span style="color:#f92672">=</span>03_westling
TEMP<span style="color:#f92672">=</span>04_temp

<span style="color:#75715e">###################################################</span>

echo <span style="color:#e6db74">&#34;##################### Render Framerate and Length ########################&#34;</span>

<span style="color:#75715e"># clean the house</span>
rm -f $WESTLING/*.jpg

<span style="color:#75715e">#### Loop for scene name reading all necessary parameters in cutlist ####</span>
<span style="color:#66d9ef">for</span> SCENE_NAME in <span style="color:#e6db74">`</span>sed <span style="color:#e6db74">&#39;1d&#39;</span> $CUTLIST | cut -d <span style="color:#e6db74">&#39;;&#39;</span> -f <span style="color:#ae81ff">2</span> -<span style="color:#e6db74">`</span>
<span style="color:#75715e"># sed &#39;1d&#39; eliminates the first row of column headers, cut reads the columns using the delimiter &#34;;&#34;</span>
<span style="color:#66d9ef">do</span>

<span style="color:#75715e"># the; around the scene name prevents confusion of strings</span>
FRANK <span style="color:#f92672">()</span>
<span style="color:#f92672">{</span>
grep <span style="color:#e6db74">&#34;;</span>$SCENE_NAME<span style="color:#e6db74">;&#34;</span> $CUTLIST | cut -d <span style="color:#e6db74">&#39;;&#39;</span> -f <span style="color:#ae81ff">1</span> -
<span style="color:#f92672">}</span>
LENGTH <span style="color:#f92672">()</span>
<span style="color:#f92672">{</span>
echo <span style="color:#66d9ef">$((</span> <span style="color:#e6db74">`</span>grep <span style="color:#e6db74">&#34;;</span>$SCENE_NAME<span style="color:#e6db74">;&#34;</span> $CUTLIST | cut -d <span style="color:#e6db74">&#39;;&#39;</span> -f <span style="color:#ae81ff">4</span> -<span style="color:#e6db74">`</span> <span style="color:#f92672">-</span> <span style="color:#e6db74">`</span>FRANK<span style="color:#e6db74">`</span> <span style="color:#66d9ef">))</span>
<span style="color:#f92672">}</span>
<span style="color:#75715e"># length should be a multiple of original_frames and framerate!</span>
<span style="color:#75715e"># length is now in absolute frame numbers of the final video</span>
FRAMERATE <span style="color:#f92672">()</span>
<span style="color:#f92672">{</span>
grep <span style="color:#e6db74">&#34;;</span>$SCENE_NAME<span style="color:#e6db74">;&#34;</span> $CUTLIST | cut -d <span style="color:#e6db74">&#39;;&#39;</span> -f <span style="color:#ae81ff">3</span> -
<span style="color:#f92672">}</span>
SCENE_PIP_PER_FRAME <span style="color:#f92672">()</span> <span style="color:#f92672">{</span> grep <span style="color:#e6db74">&#34;;</span>$SCENE_NAME_PER_FRAME<span style="color:#e6db74">;&#34;</span> $CUTLIST | cut -d <span style="color:#e6db74">&#39;;&#39;</span> -f 5; <span style="color:#f92672">}</span>
<span style="color:#75715e"># this function matches the scenename from the filename with the one in the cutlist and reads the pip parameter accordingly.</span>
ORIGINAL_FRAMES<span style="color:#f92672">()</span>
<span style="color:#f92672">{</span>
ls 02_scenes/<span style="color:#e6db74">&#34;</span>$SCENE_NAME<span style="color:#e6db74">&#34;</span>/<span style="color:#e6db74">&#34;</span>$SCENE_NAME<span style="color:#e6db74">&#34;</span>_frame_*.jpg | wc -w <span style="color:#75715e">#no idea why -l does not work!!!</span>
<span style="color:#f92672">}</span>
<span style="color:#75715e"># counts the number of original frames of the scene</span>

<span style="color:#75715e"># if the scene is not in the defined frame range, its loop is skipped</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">((</span><span style="color:#e6db74">`</span>FRANK<span style="color:#e6db74">`</span> &lt; <span style="color:#e6db74">&#34;</span>$START_FRAME<span style="color:#e6db74">&#34;</span><span style="color:#f92672">))</span>
    <span style="color:#66d9ef">then</span>
    <span style="color:#66d9ef">continue</span>
<span style="color:#66d9ef">fi</span>

<span style="color:#66d9ef">if</span> <span style="color:#f92672">((</span><span style="color:#e6db74">`</span>FRANK<span style="color:#e6db74">`</span> &gt; <span style="color:#e6db74">&#34;</span>$END_FRAME<span style="color:#e6db74">&#34;</span><span style="color:#f92672">))</span>
    <span style="color:#66d9ef">then</span>
    break
<span style="color:#66d9ef">fi</span>

<span style="color:#75715e">#echo parameters for debugging</span>
echo <span style="color:#e6db74">&#34;++++ Scene Name: &#34;</span>$SCENE_NAME<span style="color:#e6db74">&#34; ++++&#34;</span>
echo <span style="color:#e6db74">&#34;Frank: `FRANK`&#34;</span>
echo <span style="color:#e6db74">&#34;Length: `LENGTH`&#34;</span>
echo <span style="color:#e6db74">&#34;Framerate: `FRAMERATE`&#34;</span>
echo <span style="color:#e6db74">&#34;Original Frames: `ORIGINAL_FRAMES`&#34;</span>
echo <span style="color:#e6db74">&#34;-------------------------------------------------------&#34;</span>

<span style="color:#75715e">#### first loop - Length Boost ####</span>
<span style="color:#66d9ef">for</span> <span style="color:#f92672">((</span>LENGTH_BOOST <span style="color:#f92672">=</span> 0;LENGTH_BOOST &lt;<span style="color:#f92672">=</span> <span style="color:#66d9ef">$((</span><span style="color:#e6db74">`</span>LENGTH<span style="color:#e6db74">`</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">))</span>;LENGTH_BOOST <span style="color:#f92672">=</span> LENGTH_BOOST + <span style="color:#66d9ef">$((</span>$OVERALL_FRAMERATE<span style="color:#f92672">/</span><span style="color:#e6db74">`</span>FRAMERATE<span style="color:#e6db74">`</span><span style="color:#66d9ef">))</span><span style="color:#f92672">))</span> <span style="color:#66d9ef">do</span>
<span style="color:#75715e"># &#34;0&#34; because added to the framerate_boost loop .. length of scene .. increment is derived</span>
<span style="color:#75715e"># length minus one because it starts from 0</span>

COUNTER<span style="color:#f92672">=</span><span style="color:#66d9ef">$((</span>$LENGTH_BOOST <span style="color:#f92672">/</span> <span style="color:#f92672">(</span>$OVERALL_FRAMERATE <span style="color:#f92672">/</span> <span style="color:#e6db74">`</span>FRAMERATE<span style="color:#e6db74">`</span><span style="color:#f92672">)+</span><span style="color:#ae81ff">1</span><span style="color:#66d9ef">))</span>
<span style="color:#75715e"># counts which frame is copied, important for the cp command</span>
<span style="color:#75715e"># does not restart</span>
<span style="color:#75715e"># no idea why brackets are necessary!!</span>

COUNTER_RESTART<span style="color:#f92672">=</span><span style="color:#66d9ef">$((</span>$COUNTER<span style="color:#f92672">%</span><span style="color:#e6db74">`</span>ORIGINAL_FRAMES<span style="color:#e6db74">`</span><span style="color:#66d9ef">))</span>
<span style="color:#75715e"># accomplishes the restart with the remainder</span>

<span style="color:#75715e">#### second loop - Framerate Boost ####</span>
<span style="color:#66d9ef">for</span> <span style="color:#f92672">((</span>FRAMERATE_BOOST <span style="color:#f92672">=</span> 1;FRAMERATE_BOOST &lt;<span style="color:#f92672">=</span> <span style="color:#66d9ef">$((</span>$OVERALL_FRAMERATE<span style="color:#f92672">/</span><span style="color:#e6db74">`</span>FRAMERATE<span style="color:#e6db74">`</span><span style="color:#66d9ef">))</span>;FRAMERATE_BOOST++<span style="color:#f92672">))</span> <span style="color:#66d9ef">do</span>

<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $COUNTER_RESTART <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
cp 02_scenes/$SCENE_NAME/<span style="color:#e6db74">${</span>SCENE_NAME<span style="color:#e6db74">}</span>_*0<span style="color:#e6db74">`</span>ORIGINAL_FRAMES<span style="color:#e6db74">`</span>.jpg $WESTLING/<span style="color:#e6db74">${</span>SCENE_NAME<span style="color:#e6db74">}</span>_<span style="color:#66d9ef">$((</span>$LENGTH_BOOST<span style="color:#f92672">+</span>$FRAMERATE_BOOST<span style="color:#f92672">+</span><span style="color:#e6db74">`</span>FRANK<span style="color:#e6db74">`</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#66d9ef">))</span>.jpg
<span style="color:#66d9ef">else</span>
cp 02_scenes/$SCENE_NAME/<span style="color:#e6db74">${</span>SCENE_NAME<span style="color:#e6db74">}</span>_*0<span style="color:#e6db74">${</span>COUNTER_RESTART<span style="color:#e6db74">}</span>.jpg $WESTLING/<span style="color:#e6db74">${</span>SCENE_NAME<span style="color:#e6db74">}</span>_<span style="color:#66d9ef">$((</span>$LENGTH_BOOST<span style="color:#f92672">+</span>$FRAMERATE_BOOST<span style="color:#f92672">+</span><span style="color:#e6db74">`</span>FRANK<span style="color:#e6db74">`</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#66d9ef">))</span>.jpg
<span style="color:#66d9ef">fi</span>
<span style="color:#75715e"># the 0 of the cp command after the wildcard is risky, but not more than 2 digits</span>
<span style="color:#75715e"># additionally to the length und framerate boost the actual position (framenumber), i called it frank, of the final video is added, the final position is written in the filename for the next stage.</span>

<span style="color:#66d9ef">done</span> <span style="color:#75715e"># end FRAMERATE_BOOST</span>
<span style="color:#66d9ef">done</span> <span style="color:#75715e"># end LENGTH_BOOST</span>

<span style="color:#66d9ef">done</span> <span style="color:#75715e"># end loop SCENE_NAME</span>

echo <span style="color:#e6db74">&#34;########################### Render PIP Frames ##############################&#34;</span>
<span style="color:#75715e"># find scenename and then read pip parameters for each frame</span>

<span style="color:#75715e"># clean the house</span>
rm -f $TEMP/*.txt <span style="color:#75715e"># -f prevents errors of already empty directories</span>
rm -f $TEMP/*.jpg

<span style="color:#66d9ef">for</span> <span style="color:#f92672">((</span>i<span style="color:#f92672">=</span>$START_FRAME;i&lt;<span style="color:#f92672">=</span>$END_FRAME;i++<span style="color:#f92672">))</span>
<span style="color:#66d9ef">do</span>
echo -n <span style="color:#e6db74">&#34;&#34;</span> &gt;&gt; <span style="color:#e6db74">&#34;</span>$TEMP<span style="color:#e6db74">/temp_</span><span style="color:#e6db74">${</span>i<span style="color:#e6db74">}</span><span style="color:#e6db74">.txt&#34;</span>
<span style="color:#75715e"># if frame is missing a scene, just leave it out</span>
echo <span style="color:#e6db74">&#34;frame number: </span>$i<span style="color:#e6db74"> until </span>$END_FRAME<span style="color:#e6db74">&#34;</span>

<span style="color:#66d9ef">for</span> SCENE_NAME_PER_FRAME in <span style="color:#e6db74">`</span>ls $WESTLING | grep <span style="color:#e6db74">&#34;.*_</span>$i<span style="color:#e6db74">.jpg&#34;</span> | cut -d <span style="color:#e6db74">&#39;_&#39;</span> -f 1<span style="color:#e6db74">`</span>
<span style="color:#66d9ef">do</span>
<span style="color:#75715e"># loop for all frames of the final video and the second loop for all scene names, which already have rendered frames. scenename is read from the filename.</span>

echo -n <span style="color:#e6db74">&#34;</span>$WESTLING<span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>SCENE_NAME_PER_FRAME<span style="color:#e6db74">}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">${</span>i<span style="color:#e6db74">}</span><span style="color:#e6db74">.jpg -geometry `SCENE_PIP_PER_FRAME` -composite &#34;</span> &gt;&gt; <span style="color:#e6db74">&#34;</span>$TEMP<span style="color:#e6db74">/temp_</span><span style="color:#e6db74">${</span>i<span style="color:#e6db74">}</span><span style="color:#e6db74">.txt&#34;</span>
<span style="color:#75715e"># the whole thing is put in a temp file for each frame; correctly formatted for the imagemagick command</span>
<span style="color:#75715e"># the -n tells echo not to use a new line parameter!!</span>

<span style="color:#66d9ef">done</span> <span style="color:#75715e"># end scene_name_pip_frame</span>

convert -type TrueColor -size $OVERALL_ASPECT_RATIO xc:black <span style="color:#e6db74">`</span>cat <span style="color:#e6db74">&#34;</span>$TEMP<span style="color:#e6db74">/temp_</span><span style="color:#e6db74">${</span>i<span style="color:#e6db74">}</span><span style="color:#e6db74">.txt&#34;</span><span style="color:#e6db74">`</span> <span style="color:#e6db74">&#34;</span>$TEMP<span style="color:#e6db74">/output_`printf &#34;</span>%04d<span style="color:#e6db74">&#34; </span><span style="color:#66d9ef">$((</span> $i <span style="color:#f92672">-</span> $START_FRAME <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">))</span><span style="color:#e6db74">`.jpg&#34;</span>
<span style="color:#75715e"># cat reads the temporary file and completes the command inside the loop. echo would just return the filename</span>
<span style="color:#75715e"># the usage of printf is necessary for ffmpeg in the next step</span>
<span style="color:#75715e"># type Truecolor explicitly needed, otherwise first black frame is saved in grayscale turning the whole video grayscale</span>
<span style="color:#75715e"># the term $(( $i - $START_FRAME + 1 )) is needed to always start counting from 0001 (the way ffmpeg requires it) even if the first frame is &gt;1</span>

<span style="color:#66d9ef">done</span> <span style="color:#75715e"># end frames</span>

echo <span style="color:#e6db74">&#34;################ Render Video ######################&#34;</span>

DELAY_FROM_START_FRAME <span style="color:#f92672">()</span>
<span style="color:#f92672">{</span>
printf <span style="color:#e6db74">&#34;00:%02d:%02d.%03d\n&#34;</span> <span style="color:#66d9ef">$((</span>$START_FRAME<span style="color:#f92672">/</span>$OVERALL_FRAMERATE<span style="color:#f92672">/</span><span style="color:#ae81ff">60</span><span style="color:#66d9ef">))</span> <span style="color:#66d9ef">$((</span>$START_FRAME<span style="color:#f92672">%(</span>$OVERALL_FRAMERATE<span style="color:#f92672">*</span><span style="color:#ae81ff">60</span><span style="color:#f92672">)/</span>$OVERALL_FRAMERATE<span style="color:#66d9ef">))</span> <span style="color:#66d9ef">$((</span>$START_FRAME<span style="color:#f92672">%(</span>$OVERALL_FRAMERATE<span style="color:#f92672">*</span><span style="color:#ae81ff">60</span><span style="color:#f92672">)%</span>$OVERALL_FRAMERATE<span style="color:#f92672">*</span><span style="color:#ae81ff">1000</span><span style="color:#f92672">/</span>$OVERALL_FRAMERATE<span style="color:#66d9ef">))</span>
<span style="color:#f92672">}</span>
<span style="color:#75715e"># brings the start_frame in the format mm:ss.xxx, this is needed for the audio</span>
<span style="color:#75715e"># 5/2=2 but 5%2=1, gives the remainder</span>
<span style="color:#75715e"># printf &#34;%02d:%02d.%03d\n&#34; $(($f/25/60)) $(($f%(25*60)/25)) $(($f%(25*60)%25*40))</span>

<span style="color:#75715e"># easy mpeg2 version</span>
<span style="color:#75715e">#ffmpeg -y -f image2 -i &#34;$TEMP/output_%04d.jpg&#34; -vframes $(($END_FRAME-$START_FRAME)) -r $OVERALL_FRAMERATE -b 10000k -ss `DELAY_FROM_START_FRAME` -i &#34;shellac_mouthpiece.wav&#34; -acodec copy &#34;animation.avi&#34;</span>

<span style="color:#75715e"># HD .mp4 version</span>
ffmpeg -y -f image2 -i <span style="color:#e6db74">&#34;</span>$TEMP<span style="color:#e6db74">/output_%04d.jpg&#34;</span> -ss <span style="color:#e6db74">`</span>DELAY_FROM_START_FRAME<span style="color:#e6db74">`</span> -i <span style="color:#e6db74">&#34;shellac_mouthpiece.wav&#34;</span> -vframes <span style="color:#66d9ef">$((</span>$END_FRAME<span style="color:#f92672">-</span>$START_FRAME<span style="color:#66d9ef">))</span> -vcodec libx264 -vpre slow -crf <span style="color:#ae81ff">22</span> -r $OVERALL_FRAMERATE -threads <span style="color:#ae81ff">0</span> -acodec libfaac -ab 320k -ar <span style="color:#ae81ff">44100</span> -ac <span style="color:#ae81ff">2</span> <span style="color:#e6db74">&#34;animation.mp4&#34;</span>

<span style="color:#75715e"># -ss 00:00:002 start at (before the input file!) and -t 00:00:001 length</span>
<span style="color:#75715e"># -loop_input not needed</span>

exit
</code></pre></div><h2 id="appendix">Appendix</h2>
<p>ONE AFTER THE OTHER SCRIPT</p>
<p>It is the first I wrote, so please be careful. Corrections or optimizations are welcome. The programs used are: csvtool, imagemagick, ffmpeg.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#! /bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># variabels</span>
BITRATE<span style="color:#f92672">=</span>600k
HEIGHT<span style="color:#f92672">=</span>x1080
<span style="color:#75715e"># sets the absolute height</span>
FRAMERATE_END<span style="color:#f92672">=</span><span style="color:#ae81ff">24</span>
echo ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
echo <span style="color:#e6db74">&#34;Please enter the SCENE&#39;s name or render all videos at once by typing all:&#34;</span>
echo ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
read INPUT_SCENE

<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $INPUT_SCENE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;all&#34;</span> <span style="color:#f92672">]</span>
<span style="color:#75715e">################################################## BLOCK 01 #############################################################</span>
   <span style="color:#66d9ef">then</span>
   echo +++++++++++++ <span style="color:#e6db74">&#34;All scenes are processed&#34;</span> ++++++++++++
   echo +++++++++++++ <span style="color:#e6db74">&#34;Reading parameters&#34;</span> ++++++++++++
   <span style="color:#66d9ef">for</span> ALL_SCENES in <span style="color:#e6db74">`</span>csvtool drop <span style="color:#ae81ff">1</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">2</span> -<span style="color:#e6db74">`</span>;
   <span style="color:#66d9ef">do</span>
   RANK_ALL <span style="color:#f92672">()</span>
   <span style="color:#f92672">{</span>
   grep <span style="color:#e6db74">&#34;</span>$ALL_SCENES<span style="color:#e6db74">&#34;</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">1</span> -
   <span style="color:#f92672">}</span>
   FRAMERATE_ALL <span style="color:#f92672">()</span>
   <span style="color:#f92672">{</span>
   grep <span style="color:#e6db74">&#34;</span>$ALL_SCENES<span style="color:#e6db74">&#34;</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">3</span> -
   <span style="color:#f92672">}</span>
   LENGTH_ALL <span style="color:#f92672">()</span>
   <span style="color:#f92672">{</span>
   grep <span style="color:#e6db74">&#34;</span>$ALL_SCENES<span style="color:#e6db74">&#34;</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">4</span> -
   <span style="color:#f92672">}</span>
   echo <span style="color:#e6db74">&#34;scene = </span>$ALL_SCENES<span style="color:#e6db74">&#34;</span>
   echo <span style="color:#e6db74">&#34;rank = `RANK_ALL`&#34;</span>
   echo <span style="color:#e6db74">&#34;framerate = `FRAMERATE_ALL`&#34;</span>
   echo <span style="color:#e6db74">&#34;length = `LENGTH_ALL`&#34;</span>
   <span style="color:#75715e"># warning about too many arguments, because finding lots of files?? but it works</span>
   blod <span style="color:#f92672">()</span>
   <span style="color:#f92672">{</span>
   find ./02_scenes/$ALL_SCENES -name <span style="color:#e6db74">`</span>RANK_ALL<span style="color:#e6db74">`</span>_<span style="color:#e6db74">${</span>ALL_SCENES<span style="color:#e6db74">}</span>*
   <span style="color:#f92672">}</span>
   <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">`</span>blod<span style="color:#e6db74">`</span> <span style="color:#f92672">]</span>
   <span style="color:#75715e"># if the rank is not the same with the one in the cutlist it has to be updated</span>
     <span style="color:#66d9ef">then</span>
     echo +++++++++++++ <span style="color:#e6db74">&#34;Rename </span>$ALL_SCENES<span style="color:#e6db74"> by updating its name and rank&#34;</span> ++++++++++++
     <span style="color:#66d9ef">for</span> FILE in 02_scenes/$ALL_SCENES/*frame*.jpg ;
        <span style="color:#66d9ef">do</span>
        NEWFILE <span style="color:#f92672">()</span>
        <span style="color:#f92672">{</span>
        echo $FILE | sed <span style="color:#e6db74">&#34;s/</span><span style="color:#e6db74">${</span>ALL_SCENES<span style="color:#e6db74">}</span><span style="color:#e6db74">\/.*_.*_frame/</span><span style="color:#e6db74">${</span>ALL_SCENES<span style="color:#e6db74">}</span><span style="color:#e6db74">\/`RANK_ALL`\_</span><span style="color:#e6db74">${</span>ALL_SCENES<span style="color:#e6db74">}</span><span style="color:#e6db74">\_frame/g&#34;</span>
        <span style="color:#f92672">}</span>
        mv <span style="color:#e6db74">&#34;</span>$FILE<span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">`</span>NEWFILE<span style="color:#e6db74">`</span> ;
        <span style="color:#66d9ef">done</span>

  <span style="color:#75715e">#paths need to be preserved! wildcards with .* - no idea why!</span>
  <span style="color:#75715e">#frame_* instead of more general *.jpgs because there are also the original photos in the directory</span>
   <span style="color:#66d9ef">fi</span>

   echo +++++++++++++ <span style="color:#e6db74">&#34;Render scene </span>$ALL_SCENES<span style="color:#e6db74">&#34;</span> ++++++++++++
   ffmpeg -y -loop_input -f image2 -r <span style="color:#e6db74">`</span>FRAMERATE_ALL<span style="color:#e6db74">`</span> -i <span style="color:#e6db74">&#34;02_scenes/</span>$ALL_SCENES<span style="color:#e6db74">/`RANK_ALL`_</span><span style="color:#e6db74">${</span>ALL_SCENES<span style="color:#e6db74">}</span><span style="color:#e6db74">_frame_%04d.jpg&#34;</span> -b $BITRATE -r $FRAMERATE_END -vframes <span style="color:#e6db74">`</span>LENGTH_ALL<span style="color:#e6db74">`</span> <span style="color:#e6db74">&#34;03_output/`RANK_ALL`_</span><span style="color:#e6db74">${</span>ALL_SCENES<span style="color:#e6db74">}</span><span style="color:#e6db74">_output.avi&#34;</span>
   <span style="color:#66d9ef">done</span>
   <span style="color:#75715e"># {} are necessary to preserve the following underscore</span>
   <span style="color:#75715e"># -r framerate needs to be set before the input parameter</span>
   <span style="color:#75715e"># the framerate of the output is necessary to keep the framerate differences of the scenes</span>

   <span style="color:#66d9ef">else</span>
     <span style="color:#75715e"># if scene not in cutlist; ask for parameters, copy frames and write to cutlist</span>
   <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;`grep &#34;</span>;<span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span>;<span style="color:#e6db74">&#34; cutlist.csv`&#34;</span> <span style="color:#f92672">]</span>
   <span style="color:#75715e">################################################## BLOCK 02 #############################################################</span>
   <span style="color:#75715e"># semicolon prevents the matching of incomplete (parts of) scene names for instance &#34;bdeckunge&#34; instead of &#34;abdeckungen&#34;</span>
   <span style="color:#75715e"># for condition (-z (string is null) -n (string is not null))</span>
      <span style="color:#66d9ef">then</span>
      echo +++++++++++++ <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74"> is not existing ... creation initialized&#34;</span> ++++++++++++

      echo +++++++++++++ <span style="color:#e6db74">&#34;Have you cut the frames of </span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74"> to 4:3 aspect ratio?&#34;</span> ++++++++++++
      read -p <span style="color:#e6db74">&#34;Of course I did!&#34;</span>

      echo +++++++++ <span style="color:#e6db74">&#34;Define parameters&#34;</span> ++++++++++
      echo <span style="color:#e6db74">&#34;Please enter its RANK (4 digits):&#34;</span>
      read INPUT_RANK
      echo <span style="color:#e6db74">&#34;Please enter the framerate:&#34;</span>
      read INPUT_FRAMERATE
      echo <span style="color:#e6db74">&#34;Please enter the length in number of frames:&#34;</span>
      read INPUT_LENGTH

      echo +++++++++ <span style="color:#e6db74">&#34;Create directory for scene&#34;</span> ++++++++++
      mkdir -p 02_scenes/$INPUT_SCENE
      <span style="color:#75715e"># if directory is already existing, no error is given due to the -p</span>

      echo +++++++++ <span style="color:#e6db74">&#34;Copy frames to newly created directory&#34;</span> ++++++++++
      <span style="color:#75715e"># should be 4:3</span>
      mv ~/*.jpg 02_scenes/$INPUT_SCENE

      echo +++++++++ <span style="color:#e6db74">&#34;Resize frames&#34;</span> ++++++++++
      mogrify -resize $HEIGHT 02_scenes/$INPUT_SCENE/frame_*.jpg
      <span style="color:#75715e"># only frames, to prevent original photos;</span>
      <span style="color:#75715e"># imagemagick is used for this</span>

      echo +++++++++++++ <span style="color:#e6db74">&#34;Rename by adding the scene&#39;s name and rank&#34;</span> ++++++++++++
      <span style="color:#75715e"># if the name is not congruent with the entries of the cutlist; rank is necessary for the order of the cat command later on</span>
      <span style="color:#75715e"># only frames, to prevent original photos</span>
      <span style="color:#66d9ef">for</span> FILE in 02_scenes/$INPUT_SCENE/frame_*.jpg ;
      <span style="color:#66d9ef">do</span>
      NEWFILE<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>echo $FILE | sed <span style="color:#e6db74">&#34;s/frame/</span>$INPUT_RANK<span style="color:#e6db74">\_</span>$INPUT_SCENE<span style="color:#e6db74">\_frame/g&#34;</span><span style="color:#e6db74">`</span> ;
      mv <span style="color:#e6db74">&#34;</span>$FILE<span style="color:#e6db74">&#34;</span> $NEWFILE ;
      <span style="color:#66d9ef">done</span>

      echo +++++++++++++ <span style="color:#e6db74">&#34;Render </span>$SCENE<span style="color:#e6db74">&#34;</span> ++++++++++++
      ffmpeg -loop_input -f image2 -r $INPUT_FRAMERATE -i <span style="color:#e6db74">&#34;02_scenes/</span>$INPUT_SCENE<span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>INPUT_RANK<span style="color:#e6db74">}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">_frame_%04d.jpg&#34;</span> -b $BITRATE -r $FRAMERATE_END -vframes $INPUT_LENGTH <span style="color:#e6db74">&#34;03_output/</span><span style="color:#e6db74">${</span>INPUT_RANK<span style="color:#e6db74">}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">_output.avi&#34;</span>
      <span style="color:#75715e"># {} are necessary to preserve the following underscore</span>
      <span style="color:#75715e"># no overwrite (-y) needed</span>
      <span style="color:#75715e"># the framerate of the output is necessary to keep the framerate differences of the scenes</span>

      echo +++++++++++++ <span style="color:#e6db74">&#34;Write variables to cutlist.csv&#34;</span> ++++++++++++
      echo <span style="color:#e6db74">&#34;</span>$INPUT_RANK<span style="color:#e6db74">;</span>$INPUT_SCENE<span style="color:#e6db74">;</span>$INPUT_FRAMERATE<span style="color:#e6db74">;</span>$INPUT_LENGTH<span style="color:#e6db74">;&#34;</span> &gt;&gt; cutlist.csv
      read -p <span style="color:#e6db74">&#34;Done!&#34;</span>
      <span style="color:#75715e"># as a last step after everything was successful to prevent errors in the cutlist</span>

    <span style="color:#75715e"># if scene already in the cutlist</span>
    <span style="color:#66d9ef">else</span>
    <span style="color:#75715e">################################################## BLOCK 03 #############################################################</span>
    echo +++++++++++++ <span style="color:#e6db74">&#34;</span>$INPUT_SCENE<span style="color:#e6db74"> is already existing&#34;</span> ++++++++++++
    echo +++++++++++++ <span style="color:#e6db74">&#34;Read defined parameters of </span>$INPUT_SCENE<span style="color:#e6db74">&#34;</span> ++++++++++++
    <span style="color:#75715e"># Define Functions RANK, FRAMERATE, LENGTH by reading cutlist.csv</span>
    RANK <span style="color:#f92672">()</span>
    <span style="color:#f92672">{</span>
    grep <span style="color:#e6db74">&#34;</span>$INPUT_SCENE<span style="color:#e6db74">&#34;</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">1</span> -
    <span style="color:#f92672">}</span>
    FRAMERATE <span style="color:#f92672">()</span>
    <span style="color:#f92672">{</span>
    grep <span style="color:#e6db74">&#34;</span>$INPUT_SCENE<span style="color:#e6db74">&#34;</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">3</span> -
    <span style="color:#f92672">}</span>
    LENGTH <span style="color:#f92672">()</span>
    <span style="color:#f92672">{</span>
    grep <span style="color:#e6db74">&#34;</span>$INPUT_SCENE<span style="color:#e6db74">&#34;</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">4</span> -
    <span style="color:#f92672">}</span>
    echo <span style="color:#e6db74">&#34;scene = </span>$INPUT_SCENE<span style="color:#e6db74">&#34;</span>
    echo <span style="color:#e6db74">&#34;rank = `RANK`&#34;</span>
    echo <span style="color:#e6db74">&#34;framerate = `FRAMERATE`&#34;</span>
    echo <span style="color:#e6db74">&#34;length = `LENGTH`&#34;</span>
    echo +++++++++++++ <span style="color:#e6db74">&#34; The rank of </span>$INPUT_SCENE<span style="color:#e6db74"> changed ... renaming &#34;</span> ++++++++++++

    <span style="color:#75715e"># warning about too many arguments, because finding lots of files?? but it works</span>
    blod <span style="color:#f92672">()</span>
    <span style="color:#f92672">{</span>
    find ./02_scenes/$INPUT_SCENE -name <span style="color:#e6db74">`</span>RANK<span style="color:#e6db74">`</span>_<span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span>*
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">`</span>blod<span style="color:#e6db74">`</span> <span style="color:#f92672">]</span>
    <span style="color:#75715e"># if the rank is not matching the one of the cutlist, it needs to be changed</span>
     <span style="color:#66d9ef">then</span>
     echo +++++++++++++ <span style="color:#e6db74">&#34;Rename </span>$INPUT_SCENE<span style="color:#e6db74"> by updating its name and rank&#34;</span> ++++++++++++
     <span style="color:#66d9ef">for</span> FILE in 02_scenes/$INPUT_SCENE/*frame*.jpg ;
        <span style="color:#66d9ef">do</span>
        NEWFILE <span style="color:#f92672">()</span>
        <span style="color:#f92672">{</span>
        echo $FILE | sed <span style="color:#e6db74">&#34;s/</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">\/.*_.*_frame/</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">\/`RANK`\_</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">\_frame/g&#34;</span>
        <span style="color:#f92672">}</span>
        mv <span style="color:#e6db74">&#34;</span>$FILE<span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">`</span>NEWFILE<span style="color:#e6db74">`</span> ;
        <span style="color:#66d9ef">done</span>
    <span style="color:#66d9ef">fi</span>
    echo +++++++++++++ <span style="color:#e6db74">&#34;Render </span>$SCENE<span style="color:#e6db74">&#34;</span> ++++++++++++
    ffmpeg -loop_input -f image2 -r <span style="color:#e6db74">`</span>FRAMERATE<span style="color:#e6db74">`</span> -i <span style="color:#e6db74">&#34;02_scenes/</span>$INPUT_SCENE<span style="color:#e6db74">/`RANK`_</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">_frame_%04d.jpg&#34;</span> -b $BITRATE -r $FRAMERATE_END -vframes <span style="color:#e6db74">`</span>LENGTH<span style="color:#e6db74">`</span> <span style="color:#e6db74">&#34;03_output/`RANK`_</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">_output.avi&#34;</span>
    <span style="color:#75715e"># {} are necessary to preserve the following underscore</span>
    <span style="color:#75715e"># the framerate of the output is necessary to keep the framerate differences of the scenes</span>
    <span style="color:#66d9ef">fi</span>
<span style="color:#66d9ef">fi</span>

<span style="color:#75715e">################################################## FINAL BLOCK #############################################################</span>

echo +++++++++ <span style="color:#e6db74">&#34;Remove expired output videos&#34;</span> ++++++++++
<span style="color:#75715e"># remove expired output videos, otherwise cat adds them to the final file</span>
<span style="color:#66d9ef">for</span> I in 03_output/*_output.avi
    <span style="color:#66d9ef">do</span>
    temp<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>echo <span style="color:#e6db74">&#34;</span>$I<span style="color:#e6db74">&#34;</span> | cut -c 11- | cut -d <span style="color:#e6db74">&#39;_&#39;</span> -f 1-2 | sed  <span style="color:#e6db74">&#34;s/_/;/g&#34;</span><span style="color:#e6db74">`</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">`</span>grep $temp cutlist.csv<span style="color:#e6db74">`</span> <span style="color:#f92672">]</span>
        <span style="color:#66d9ef">then</span>
        echo delete $I ???
        rm -i $I
    <span style="color:#66d9ef">fi</span>
<span style="color:#66d9ef">done</span>
<span style="color:#75715e"># the ls gives the path, cut removes the same path on the 11th digit and passes on the rest, cut separates the output at the &#39;_&#39; sign (recognizes fields) and provides the first two fields, sed is substitutes the &#39;_&#39; with a semicolon as used in the cutlist, and finally this string is looked up in the cutlist</span>

echo +++++++++ <span style="color:#e6db74">&#34;Merge all videos&#34;</span> ++++++++++
cat 03_output/*output.avi &gt; 03_output/output_video.avi
<span style="color:#75715e"># the rank must be correct for the sequence of the scenes</span>

echo +++++++++++ <span style="color:#e6db74">&#34;Add sound&#34;</span> +++++++++++
ffmpeg -y -shortest -i 03_output/output_video.avi -vcodec copy  -b $BITRATE -r $FRAMERATE_END -i 03_output/output_sound.mp3 -acodec copy <span style="color:#e6db74">&#34;invent_a_fire.avi&#34;</span>
<span style="color:#75715e"># should be a formality, the shortest input ends the the file</span>
exit
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ! /bin/bash</span>

<span style="color:#75715e"># variabels</span>

BITRATE<span style="color:#f92672">=</span>600k HEIGHT<span style="color:#f92672">=</span>x1080

<span style="color:#75715e"># sets the absolute height</span>

FRAMERATE_END<span style="color:#f92672">=</span><span style="color:#ae81ff">24</span> echo ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ echo <span style="color:#e6db74">&#34;Please enter the SCENE&#39;s name or render all videos at once by typing all:&#34;</span> echo ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ read INPUT_SCENE

<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $INPUT_SCENE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;all&#34;</span> <span style="color:#f92672">]</span>

<span style="color:#75715e">## ############################################ BLOCK 01</span>

<span style="color:#66d9ef">then</span> echo +++++++++++++ <span style="color:#e6db74">&#34;All scenes are processed&#34;</span> ++++++++++++ echo +++++++++++++ <span style="color:#e6db74">&#34;Reading parameters&#34;</span> ++++++++++++ <span style="color:#66d9ef">for</span> ALL_SCENES in <span style="color:#e6db74">`</span>csvtool drop <span style="color:#ae81ff">1</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">2</span> -<span style="color:#e6db74">`</span>; <span style="color:#66d9ef">do</span> RANK_ALL <span style="color:#f92672">()</span> <span style="color:#f92672">{</span> grep <span style="color:#e6db74">&#34;</span>$ALL_SCENES<span style="color:#e6db74">&#34;</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">1</span> - <span style="color:#f92672">}</span> FRAMERATE_ALL <span style="color:#f92672">()</span> <span style="color:#f92672">{</span> grep <span style="color:#e6db74">&#34;</span>$ALL_SCENES<span style="color:#e6db74">&#34;</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">3</span> - <span style="color:#f92672">}</span> LENGTH_ALL <span style="color:#f92672">()</span> <span style="color:#f92672">{</span> grep <span style="color:#e6db74">&#34;</span>$ALL_SCENES<span style="color:#e6db74">&#34;</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">4</span> - <span style="color:#f92672">}</span> echo <span style="color:#e6db74">&#34;scene = </span>$ALL_SCENES<span style="color:#e6db74">&#34;</span> echo <span style="color:#e6db74">&#34;rank = `RANK_ALL`&#34;</span> echo <span style="color:#e6db74">&#34;framerate = `FRAMERATE_ALL`&#34;</span> echo <span style="color:#e6db74">&#34;length = `LENGTH_ALL`&#34;</span>

<span style="color:#75715e"># warning about too many arguments, because finding lots of files?? but it works</span>

blod <span style="color:#f92672">()</span> <span style="color:#f92672">{</span> find ./02_scenes/$ALL_SCENES -name <span style="color:#e6db74">`</span>RANK_ALL<span style="color:#e6db74">`</span>_<span style="color:#e6db74">${</span>ALL_SCENES<span style="color:#e6db74">}</span>* <span style="color:#f92672">}</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">`</span>blod<span style="color:#e6db74">`</span> <span style="color:#f92672">]</span>

<span style="color:#75715e"># if the rank is not the same with the one in the cutlist it has to be updated</span>

<span style="color:#66d9ef">then</span> echo +++++++++++++ <span style="color:#e6db74">&#34;Rename </span>$ALL_SCENES<span style="color:#e6db74"> by updating its name and rank&#34;</span> ++++++++++++ <span style="color:#66d9ef">for</span> FILE in 02_scenes/$ALL_SCENES/_frame_.jpg ; <span style="color:#66d9ef">do</span> NEWFILE <span style="color:#f92672">()</span> <span style="color:#f92672">{</span> echo $FILE | sed <span style="color:#e6db74">&#34;s/</span><span style="color:#e6db74">${</span>ALL_SCENES<span style="color:#e6db74">}</span><span style="color:#e6db74">\/.*_.*_frame/</span><span style="color:#e6db74">${</span>ALL_SCENES<span style="color:#e6db74">}</span><span style="color:#e6db74">\/`RANK_ALL`\_</span><span style="color:#e6db74">${</span>ALL_SCENES<span style="color:#e6db74">}</span><span style="color:#e6db74">_frame/g&#34;</span> <span style="color:#f92672">}</span> mv <span style="color:#e6db74">&#34;</span>$FILE<span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">`</span>NEWFILE<span style="color:#e6db74">`</span> ; <span style="color:#66d9ef">done</span>


<span style="color:#75715e"># paths need to be preserved! wildcards with .* - no idea why!</span>

<span style="color:#75715e"># frame __instead of more general_ .jpgs because there are also the original photos in the directory</span>

<span style="color:#66d9ef">fi</span>

echo +++++++++++++ <span style="color:#e6db74">&#34;Render scene </span>$ALL_SCENES<span style="color:#e6db74">&#34;</span> ++++++++++++ ffmpeg -y -loop_input -f image2 -r <span style="color:#e6db74">`</span>FRAMERATE_ALL<span style="color:#e6db74">`</span> -i <span style="color:#e6db74">&#34;02_scenes/</span>$ALL_SCENES<span style="color:#e6db74">/`RANK_ALL`_</span><span style="color:#e6db74">${</span>ALL_SCENES<span style="color:#e6db74">}</span><span style="color:#e6db74">_frame_%04d.jpg&#34;</span> -b $BITRATE -r $FRAMERATE_END -vframes <span style="color:#e6db74">`</span>LENGTH_ALL<span style="color:#e6db74">`</span> <span style="color:#e6db74">&#34;03_output/`RANK_ALL`_</span><span style="color:#e6db74">${</span>ALL_SCENES<span style="color:#e6db74">}</span><span style="color:#e6db74">_output.avi&#34;</span> <span style="color:#66d9ef">done</span>

<span style="color:#75715e"># {} are necessary to preserve the following underscore</span>

<span style="color:#75715e"># -r framerate needs to be set before the input parameter</span>

<span style="color:#75715e"># the framerate of the output is necessary to keep the framerate differences of the scenes</span>

<span style="color:#66d9ef">else</span>

<span style="color:#75715e"># if scene not in cutlist; ask for parameters, copy frames and write to cutlist</span>

<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;`grep &#34;</span>;<span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span>;<span style="color:#e6db74">&#34; cutlist.csv`&#34;</span> <span style="color:#f92672">]</span>

<span style="color:#75715e">## ############################################ BLOCK 02</span>

<span style="color:#75715e"># semicolon prevents the matching of incomplete (parts of) scene names for instance &#34;bdeckunge&#34; instead of &#34;abdeckungen&#34;</span>

<span style="color:#75715e"># for condition (-z (string is null) -n (string is not null))</span>

<span style="color:#66d9ef">then</span> echo +++++++++++++ <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74"> is not existing ... creation initialized&#34;</span> ++++++++++++

echo +++++++++++++ <span style="color:#e6db74">&#34;Have you cut the frames of </span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74"> to 4:3 aspect ratio?&#34;</span> ++++++++++++ read -p <span style="color:#e6db74">&#34;Of course I did!&#34;</span>

echo +++++++++ <span style="color:#e6db74">&#34;Define parameters&#34;</span> ++++++++++ echo <span style="color:#e6db74">&#34;Please enter its RANK (4 digits):&#34;</span> read INPUT_RANK echo <span style="color:#e6db74">&#34;Please enter the framerate:&#34;</span> read INPUT_FRAMERATE echo <span style="color:#e6db74">&#34;Please enter the length in number of frames:&#34;</span> read INPUT_LENGTH

echo +++++++++ <span style="color:#e6db74">&#34;Create directory for scene&#34;</span> ++++++++++ mkdir -p 02_scenes/$INPUT_SCENE


<span style="color:#75715e"># if directory is already existing, no error is given due to the -p</span>

echo +++++++++ <span style="color:#e6db74">&#34;Copy frames to newly created directory&#34;</span> ++++++++++

<span style="color:#75715e"># should be 4:3</span>
mv ~/*.jpg 02_scenes/$INPUT_SCENE

echo +++++++++ <span style="color:#e6db74">&#34;Resize frames&#34;</span> ++++++++++ mogrify -resize $HEIGHT 02_scenes/$INPUT_SCENE/frame_*.jpg


<span style="color:#75715e"># only frames, to prevent original photos;</span>

<span style="color:#75715e"># imagemagick is used for this</span>

echo +++++++++++++ <span style="color:#e6db74">&#34;Rename by adding the scene&#39;s name and rank&#34;</span> ++++++++++++

<span style="color:#75715e"># if the name is not congruent with the entries of the cutlist; rank is necessary for the order of the cat command later on</span>

<span style="color:#75715e"># only frames, to prevent original photos</span>

<span style="color:#66d9ef">for</span> FILE in 02_scenes/$INPUT_SCENE/frame_*.jpg ; <span style="color:#66d9ef">do</span> NEWFILE<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>echo $FILE | sed <span style="color:#e6db74">&#34;s/frame/</span>$INPUT_RANK<span style="color:#e6db74">\_</span>$INPUT_SCENE<span style="color:#e6db74">\_frame/g&#34;</span><span style="color:#e6db74">`</span> ; mv <span style="color:#e6db74">&#34;</span>$FILE<span style="color:#e6db74">&#34;</span> $NEWFILE ; <span style="color:#66d9ef">done</span>

echo +++++++++++++ <span style="color:#e6db74">&#34;Render </span>$SCENE<span style="color:#e6db74">&#34;</span> ++++++++++++ ffmpeg -loop_input -f image2 -r $INPUT_FRAMERATE -i <span style="color:#e6db74">&#34;02_scenes/</span>$INPUT_SCENE<span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>INPUT_RANK<span style="color:#e6db74">}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">_frame_%04d.jpg&#34;</span> -b $BITRATE -r $FRAMERATE_END -vframes $INPUT_LENGTH <span style="color:#e6db74">&#34;03_output/</span><span style="color:#e6db74">${</span>INPUT_RANK<span style="color:#e6db74">}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">_output.avi&#34;</span>

<span style="color:#75715e"># {} are necessary to preserve the following underscore</span>

<span style="color:#75715e"># no overwrite (-y) needed</span>

<span style="color:#75715e"># the framerate of the output is necessary to keep the framerate differences of the scenes</span>

echo +++++++++++++ <span style="color:#e6db74">&#34;Write variables to cutlist.csv&#34;</span> ++++++++++++ echo <span style="color:#e6db74">&#34;</span>$INPUT_RANK<span style="color:#e6db74">;</span>$INPUT_SCENE<span style="color:#e6db74">;</span>$INPUT_FRAMERATE<span style="color:#e6db74">;</span>$INPUT_LENGTH<span style="color:#e6db74">;&#34;</span> &gt;&gt; cutlist.csv read -p <span style="color:#e6db74">&#34;Done!&#34;</span>

<span style="color:#75715e"># as a last step after everything was successful to prevent errors in the cutlist</span>

<span style="color:#75715e"># if scene already in the cutlist</span>

<span style="color:#66d9ef">else</span>

<span style="color:#75715e">## ############################################ BLOCK 03</span>

echo +++++++++++++ <span style="color:#e6db74">&#34;</span>$INPUT_SCENE<span style="color:#e6db74"> is already existing&#34;</span> ++++++++++++ echo +++++++++++++ <span style="color:#e6db74">&#34;Read defined parameters of </span>$INPUT_SCENE<span style="color:#e6db74">&#34;</span> ++++++++++++


<span style="color:#75715e"># Define Functions RANK, FRAMERATE, LENGTH by reading cutlist.csv</span>

RANK <span style="color:#f92672">()</span> <span style="color:#f92672">{</span> grep <span style="color:#e6db74">&#34;</span>$INPUT_SCENE<span style="color:#e6db74">&#34;</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">1</span> - <span style="color:#f92672">}</span> FRAMERATE <span style="color:#f92672">()</span> <span style="color:#f92672">{</span> grep <span style="color:#e6db74">&#34;</span>$INPUT_SCENE<span style="color:#e6db74">&#34;</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">3</span> - <span style="color:#f92672">}</span> LENGTH <span style="color:#f92672">()</span> <span style="color:#f92672">{</span> grep <span style="color:#e6db74">&#34;</span>$INPUT_SCENE<span style="color:#e6db74">&#34;</span> cutlist.csv | csvtool -t <span style="color:#e6db74">&#39;;&#39;</span> col <span style="color:#ae81ff">4</span> - <span style="color:#f92672">}</span> echo <span style="color:#e6db74">&#34;scene = </span>$INPUT_SCENE<span style="color:#e6db74">&#34;</span> echo <span style="color:#e6db74">&#34;rank = `RANK`&#34;</span> echo <span style="color:#e6db74">&#34;framerate = `FRAMERATE`&#34;</span> echo <span style="color:#e6db74">&#34;length = `LENGTH`&#34;</span> echo +++++++++++++ <span style="color:#e6db74">&#34; The rank of </span>$INPUT_SCENE<span style="color:#e6db74"> changed ... renaming &#34;</span> ++++++++++++



<span style="color:#75715e"># warning about too many arguments, because finding lots of files?? but it works</span>


blod <span style="color:#f92672">()</span> <span style="color:#f92672">{</span> find ./02_scenes/$INPUT_SCENE -name <span style="color:#e6db74">`</span>RANK<span style="color:#e6db74">`</span>_<span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span>* <span style="color:#f92672">}</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">`</span>blod<span style="color:#e6db74">`</span> <span style="color:#f92672">]</span>



<span style="color:#75715e"># if the rank is not matching the one of the cutlist, it needs to be changed</span>


<span style="color:#66d9ef">then</span> echo +++++++++++++ <span style="color:#e6db74">&#34;Rename </span>$INPUT_SCENE<span style="color:#e6db74"> by updating its name and rank&#34;</span> ++++++++++++ <span style="color:#66d9ef">for</span> FILE in 02_scenes/$INPUT_SCENE/_frame_.jpg ; <span style="color:#66d9ef">do</span> NEWFILE <span style="color:#f92672">()</span> <span style="color:#f92672">{</span> echo $FILE | sed <span style="color:#e6db74">&#34;s/</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">\/.*_.*_frame/</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">\/`RANK`\_</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">_frame/g&#34;</span> <span style="color:#f92672">}</span> mv <span style="color:#e6db74">&#34;</span>$FILE<span style="color:#e6db74">&#34;</span> <span style="color:#e6db74">`</span>NEWFILE<span style="color:#e6db74">`</span> ; <span style="color:#66d9ef">done</span> <span style="color:#66d9ef">fi</span> echo +++++++++++++ <span style="color:#e6db74">&#34;Render </span>$SCENE<span style="color:#e6db74">&#34;</span> ++++++++++++ ffmpeg -loop_input -f image2 -r <span style="color:#e6db74">`</span>FRAMERATE<span style="color:#e6db74">`</span> -i <span style="color:#e6db74">&#34;02_scenes/</span>$INPUT_SCENE<span style="color:#e6db74">/`RANK`_</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">_frame_%04d.jpg&#34;</span> -b $BITRATE -r $FRAMERATE_END -vframes <span style="color:#e6db74">`</span>LENGTH<span style="color:#e6db74">`</span> <span style="color:#e6db74">&#34;03_output/`RANK`_</span><span style="color:#e6db74">${</span>INPUT_SCENE<span style="color:#e6db74">}</span><span style="color:#e6db74">_output.avi&#34;</span>



<span style="color:#75715e"># {} are necessary to preserve the following underscore</span>

<span style="color:#75715e"># the framerate of the output is necessary to keep the framerate differences of the scenes</span>


<span style="color:#66d9ef">fi</span>



<span style="color:#66d9ef">fi</span>

<span style="color:#75715e">## ############################################ FINAL BLOCK</span>

echo +++++++++ <span style="color:#e6db74">&#34;Remove expired output videos&#34;</span> ++++++++++

<span style="color:#75715e"># remove expired output videos, otherwise cat adds them to the final file</span>

<span style="color:#66d9ef">for</span> I in 03_output/*_output.avi <span style="color:#66d9ef">do</span> temp<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>echo <span style="color:#e6db74">&#34;</span>$I<span style="color:#e6db74">&#34;</span> | cut -c 11- | cut -d <span style="color:#e6db74">&#39;_&#39;</span> -f 1-2 | sed <span style="color:#e6db74">&#34;s/_/;/g&#34;</span><span style="color:#e6db74">`</span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z<span style="color:#e6db74">`</span>grep $temp cutlist.csv<span style="color:#e6db74">`</span> <span style="color:#f92672">]</span> <span style="color:#66d9ef">then</span> echo delete $I ??? rm -i $I <span style="color:#66d9ef">fi</span> <span style="color:#66d9ef">done</span>

<span style="color:#75715e"># the ls gives the path, cut removes the same path on the 11th digit and passes on the rest, cut separates the output at the &#39;_&#39; sign (recognizes fields) and provides the first two fields, sed is substitutes the &#39;_&#39; with a semicolon as used in the cutlist, and finally this string is looked up in the cutlist</span>

echo +++++++++ <span style="color:#e6db74">&#34;Merge all videos&#34;</span> ++++++++++ cat 03_output/*output.avi &gt; 03_output/output_video.avi

<span style="color:#75715e"># the rank must be correct for the sequence of the scenes</span>

echo +++++++++++ <span style="color:#e6db74">&#34;Add sound&#34;</span> +++++++++++ ffmpeg -y -shortest -i 03_output/output_video.avi -vcodec copy -b $BITRATE -r $FRAMERATE_END -i 03_output/output_sound.mp3 -acodec copy <span style="color:#e6db74">&#34;invent_a_fire.avi&#34;</span>

<span style="color:#75715e"># should be a formality, the shortest input ends the the file</span>

exit
</code></pre></div>
      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://digitalitility.com/tags/untagged/">untagged</a></span>
        
    </p>

      

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        7177 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2012-01-29 12:27
        

         
          
        
      </p>
    </div>
      <hr />
      <div class="sharing-buttons">
        
<a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f" target="_blank" rel="noopener" aria-label="" title="Share on facebook">
  <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f" target="_blank" rel="noopener" aria-label="" title="Share on twitter">
  <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small">
      <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://www.tumblr.com/widgets/share/tool?posttype=link&amp;title=Animation%20in%20the%20command%20line%20-%20.%2fanimation.sh&amp;caption=Animation%20in%20the%20command%20line%20-%20.%2fanimation.sh&amp;canonicalUrl=https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f" target="_blank" rel="noopener" aria-label="" title="Share on tumblr">
  <div class="resp-sharing-button resp-sharing-button--tumblr resp-sharing-button--small">
    <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.563 24c-5.093 0-7.031-3.756-7.031-6.411V9.747H5.116V6.648c3.63-1.313 4.512-4.596 4.71-6.469C9.84.051 9.941 0 9.999 0h3.517v6.114h4.801v3.633h-4.82v7.47c.016 1.001.375 2.371 2.207 2.371h.09c.631-.02 1.486-.205 1.936-.419l1.156 3.425c-.436.636-2.4 1.374-4.156 1.404h-.178l.011.002z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="mailto:?subject=Animation%20in%20the%20command%20line%20-%20.%2fanimation.sh&amp;body=https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f" target="_self" rel="noopener" aria-label="" title="Share via email">
  <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f&amp;media=https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f;description=Animation%20in%20the%20command%20line%20-%20.%2fanimation.sh" target="_blank" rel="noopener" aria-label="" title="Share on pinterest">
  <div class="resp-sharing-button resp-sharing-button--pinterest resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.401.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.354-.629-2.758-1.379l-.749 2.848c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.607 0 11.985-5.365 11.985-11.987C23.97 5.39 18.592.026 11.985.026L12.017 0z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f&amp;title=Animation%20in%20the%20command%20line%20-%20.%2fanimation.sh&amp;summary=Animation%20in%20the%20command%20line%20-%20.%2fanimation.sh&amp;source=https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f" target="_blank" rel="noopener" aria-label="" title="Share on linkedin">
  <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f&amp;resubmit=true&amp;title=Animation%20in%20the%20command%20line%20-%20.%2fanimation.sh" target="_blank" rel="noopener" aria-label="" title="Share on reddit">
  <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://www.xing.com/app/user?op=share;url=https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f;title=Animation%20in%20the%20command%20line%20-%20.%2fanimation.sh" target="_blank" rel="noopener" aria-label="" title="Share on xing">
  <div class="resp-sharing-button resp-sharing-button--xing resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M18.188 0c-.517 0-.741.325-.927.66 0 0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211 0 .375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016 0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894 0 21.686 0h-3.498zM3.648 4.74c-.211 0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016 0 .021L1.86 16.051c-.099.188-.093.381 0 .529.085.142.239.234.45.234h3.461c.518 0 .766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="whatsapp://send?text=Animation%20in%20the%20command%20line%20-%20.%2fanimation.sh%20https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f" target="_blank" rel="noopener" aria-label="" title="Share on whatsapp">
  <div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f&amp;t=Animation%20in%20the%20command%20line%20-%20.%2fanimation.sh" target="_blank" rel="noopener" aria-label="" title="Share on hacker news">
  <div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M0 24V0h24v24H0zM6.951 5.896l4.112 7.708v5.064h1.583v-4.972l4.148-7.799h-1.749l-2.457 4.875c-.372.745-.688 1.434-.688 1.434s-.297-.708-.651-1.434L8.831 5.896h-1.88z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://telegram.me/share/url?text=Animation%20in%20the%20command%20line%20-%20.%2fanimation.sh&amp;url=https%3a%2f%2fdigitalitility.com%2fposts%2fanimation_sh%2f" target="_blank" rel="noopener" aria-label="" title="Share on telegram">
  <div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
    </div>
  </div>
</a>

      </div>

    
    <div class="pagination">
        <div class="pagination__title">
            <span class="pagination__title-h">Read other posts</span>
            <hr />
        </div>

        <div class="pagination__buttons">
            
            <span class="button previous">
                <a href="https://digitalitility.com/posts/twetterhaeuschen/">
                    <span class="button__icon">←</span>
                    <span class="button__text">Twetterhäuschen</span>
                </a>
            </span>
            

            
        </div>
    </div>


    

    

  </main>

            </div>

            
                <footer class="footer">
    
    
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.599099f1f14b78b657d524b28e10e0c5098e7cd46e9c7aed73d577068a276c3ff1bb234cbf29cb313333e83cf411727b43157c91ce5b809e2ffc81664614608e.js" integrity="sha512-WZCZ8fFLeLZX1SSyjhDgxQmOfNRunHrtc9V3BoonbD/xuyNMvynLMTMz6Dz0EXJ7QxV8kc5bgJ4v/IFmRhRgjg=="></script>



    </body>
</html>
